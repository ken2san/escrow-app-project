# BLOCKCHAIN README

このドキュメントは、Hardhat v3 を使ってローカルチェーンを立て、React フロントエンド（このリポジトリ）と接続してモックアップを確認するための手順書です。

目的

- Hardhat ローカルノード上でコントラクトをデプロイし、UI の主要フロー（Create → Deposit → Submit Proposal → Accept）を動かして動作確認をする。

前提条件

- Node.js (推奨 v18+) と npm がインストールされていること
- `hardhat` プロジェクト（デプロイ用スクリプトとコントラクト）を別ワークスペースで用意していること
- このリポジトリ（UI）をローカルにクローン済みであること
- Metamask をブラウザにインストールしていること（ローカルチェーン接続用）

ファイルとアーティファクト

- デプロイ済みコントラクトのアドレス一覧（`deploy_addresses.txt` など）
- コントラクトの ABI（`artifacts/.../MyContract.json` または `abi.json`）
- UI 用のモックデータ (`mock/projects.json`) を用意しておくと便利

手順

1. Hardhat ノードを起動

```bash
# Hardhat プロジェクトのルートで
npx hardhat node
```

2. (別ターミナル) ローカルノードにデプロイ

```bash
# Hardhat プロジェクト内で
npx hardhat run scripts/deploy.js --network localhost
```

デプロイの出力に各コントラクトのアドレスが表示されます。これをメモして `deploy_addresses.txt` に保存してください。

3. フロントエンド側の設定（このリポジトリ）

- リポジトリをクローンしていない場合はクローン

```bash
git clone <front-end-repo-url>
cd project-escrow-app
```

- 依存インストール

```bash
npm install
```

- `.env.local` を作成して RPC とアドレスを設定

```
REACT_APP_RPC_URL=http://127.0.0.1:8545
REACT_APP_CONTRACT_ADDR=<DEPLOYED_CONTRACT_ADDRESS>
```

4. フロントエンドを起動

```bash
npm start
```

ブラウザで `http://localhost:3000` を開き、UI を操作します。

5. Metamask の設定

- Metamask にローカルチェーンを追加（RPC: `http://127.0.0.1:8545`, Chain ID: `31337`）
- Hardhat が起動しているターミナルに表示されるアカウントの private key をインポートしてアカウントを追加

6. 主要フローの確認 (Acceptance tests)

- Create Project: UI で新しいプロジェクトを作成 → Hardhat のコンソールにトランザクションログが出る
- Deposit Funds: Deposit モーダルから入金 → トランザクション成功 → UI に反映
- Submit Proposal / Accept: 提案を送って受理するフローを実行し、エスクローが移動することを確認

モック API 的に先に UI を動かしたい場合

- Hardhat を使わずに `json-server` などで `mock/db.json` を立てる選択肢があります。

デバッグに見るべきログ

- Hardhat のノードコンソール出力
- deploy スクリプトの出力（コントラクトアドレス）
- ブラウザの DevTools Console
- フロントの環境変数（`.env.local`）

セキュリティ備考

- テスト用の private key はローカル限定で扱ってください。公開リポジトリに書かないこと。

連絡先と次のステップ

- 必要ならこの README をプルリクとして送るか、短い動画（30-60s）を添えて共有すると相手の理解が早まります。

---

Generated by dev-helper
